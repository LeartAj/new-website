<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Technical Work - Leart Ajvazaj</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="writer-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">Leart Ajvazaj</a>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="writings.html" class="nav-link">Writings</a>
                <a href="technical.html" class="nav-link active">Technical</a>
                <a href="faq-recommendations.html" class="nav-link">Recommendations</a>
                <a href="write.html" class="nav-link">Write</a>
                <a href="index.html#about" class="nav-link">About</a>
            </div>
            <div class="hamburger" id="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Technical Work Manager Interface -->
    <main class="technical-manager-main">
        <div class="technical-manager-container">
            <!-- Header -->
            <header class="technical-manager-header">
                <div class="header-content">
                    <h1>Manage Technical Work</h1>
                    <p>Add, edit, and organize your research papers, class notes, and technical documentation</p>
                </div>
                <div class="header-actions">
                    <button class="btn-secondary" onclick="saveDraft()">
                        <i class="fas fa-save"></i> Save Draft
                    </button>
                    <button class="btn-primary" onclick="addNewWork()">
                        <i class="fas fa-plus"></i> Add New Work
                    </button>
                    <a href="technical.html" class="btn-outline">
                        <i class="fas fa-eye"></i> View Public Page
                    </a>
                </div>
            </header>

            <!-- Add/Edit Form -->
            <div id="addEditForm" class="add-edit-form" style="display: none;">
                <div class="form-header">
                    <h2 id="formTitle">Add New Technical Work</h2>
                    <button class="close-form" onclick="closeForm()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="form-content">
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h3>Basic Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="workTitle">Title *</label>
                                <input type="text" id="workTitle" class="form-input" placeholder="Paper or work title..." required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="workType">Type *</label>
                                <select id="workType" class="form-select" required>
                                    <option value="">Select Type</option>
                                    <option value="papers">Research Paper</option>
                                    <option value="notes">Class Notes</option>
                                    <option value="preprints">Preprint</option>
                                    <option value="presentations">Presentation</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="workDate">Date *</label>
                                <input type="text" id="workDate" class="form-input" placeholder="e.g., January 2024" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="workAuthors">Authors</label>
                                <input type="text" id="workAuthors" class="form-input" placeholder="Author names (comma-separated)">
                            </div>
                            <div class="form-group">
                                <label for="workInstructor">Instructor/Collaborator</label>
                                <input type="text" id="workInstructor" class="form-input" placeholder="Professor name or collaborator">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="workVenue">Venue/Institution</label>
                                <input type="text" id="workVenue" class="form-input" placeholder="e.g., University of Cambridge, COLT 2024">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="workAbstract">Abstract/Description *</label>
                                <textarea id="workAbstract" class="form-textarea" rows="4" placeholder="Brief description of the work..." required></textarea>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="workTags">Tags</label>
                                <input type="text" id="workTags" class="form-input" placeholder="Comma-separated tags (e.g., Machine Learning, Optimization)">
                            </div>
                        </div>
                    </div>

                    <!-- File Uploads -->
                    <div class="form-section">
                        <h3>Files & Links</h3>
                        
                        <!-- PDF Upload -->
                        <div class="file-upload-section">
                            <label class="file-upload-label">
                                <i class="fas fa-file-pdf"></i>
                                PDF File
                            </label>
                            <div class="file-upload-area" id="pdfUploadArea">
                                <div class="upload-content">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Drop PDF file here or click to upload</p>
                                    <small>Supported: PDF files up to 50MB</small>
                                </div>
                                <input type="file" id="pdfFile" accept=".pdf" style="display: none;">
                            </div>
                            <div id="pdfFileInfo" class="file-info" style="display: none;"></div>
                        </div>

                        <!-- TeX Upload -->
                        <div class="file-upload-section">
                            <label class="file-upload-label">
                                <i class="fas fa-code"></i>
                                LaTeX Source (Optional)
                            </label>
                            <div class="file-upload-area" id="texUploadArea">
                                <div class="upload-content">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Drop TeX file here or click to upload</p>
                                    <small>Supported: .tex, .zip files up to 25MB</small>
                                </div>
                                <input type="file" id="texFile" accept=".tex,.zip" style="display: none;">
                            </div>
                            <div id="texFileInfo" class="file-info" style="display: none;"></div>
                        </div>

                        <!-- External Links -->
                        <div class="form-row">
                            <div class="form-group">
                                <label for="arxivLink">arXiv Link</label>
                                <input type="url" id="arxivLink" class="form-input" placeholder="https://arxiv.org/abs/...">
                            </div>
                            <div class="form-group">
                                <label for="codeLink">Code Repository</label>
                                <input type="url" id="codeLink" class="form-input" placeholder="https://github.com/...">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="conferenceLink">Conference/Journal Link</label>
                                <input type="url" id="conferenceLink" class="form-input" placeholder="https://...">
                            </div>
                            <div class="form-group">
                                <label for="slidesLink">Slides/Presentation</label>
                                <input type="url" id="slidesLink" class="form-input" placeholder="https://...">
                            </div>
                        </div>
                    </div>

                    <!-- Preview Section -->
                    <div class="form-section">
                        <h3>Preview</h3>
                        <div id="workPreview" class="work-preview">
                            <!-- Preview will be generated here -->
                        </div>
                    </div>
                </div>

                <div class="form-footer">
                    <button class="btn-secondary" onclick="closeForm()">Cancel</button>
                    <button class="btn-secondary" onclick="previewWork()">Preview</button>
                    <button class="btn-primary" onclick="saveWork()" id="saveWorkBtn">Save Work</button>
                </div>
            </div>

            <!-- Existing Works List -->
            <div class="existing-works">
                <h2>Existing Technical Works</h2>
                <div class="works-filter">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="papers">Papers</button>
                    <button class="filter-btn" data-filter="notes">Notes</button>
                    <button class="filter-btn" data-filter="preprints">Preprints</button>
                    <button class="filter-btn" data-filter="presentations">Presentations</button>
                </div>
                <div id="worksList" class="works-list">
                    <!-- Works will be loaded here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Success Toast -->
    <div id="successToast" class="toast success-toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Work saved successfully!</span>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="delete-modal">
        <div class="delete-content">
            <div class="delete-header">
                <div class="delete-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3>Delete Technical Work</h3>
            </div>
            <div class="delete-body">
                <p>Are you sure you want to delete this work?</p>
                <div id="deleteWorkInfo" class="work-info"></div>
                <div class="warning-text">
                    <i class="fas fa-info-circle"></i>
                    This action cannot be undone. All associated files and data will be permanently deleted.
                </div>
            </div>
            <div class="delete-footer">
                <button class="btn-secondary" onclick="closeDeleteModal()">Cancel</button>
                <button class="btn-danger" onclick="confirmDelete()">
                    <i class="fas fa-trash"></i> Delete Work
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="admin-auth.js"></script>
    <script src="script.js"></script>
    <script src="technical-manager.js"></script>
    
    <!-- Admin Protection Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Check admin authentication first
            if (!window.adminAuth || !window.adminAuth.isAdmin()) {
                // Redirect to technical page if not authenticated
                window.location.href = 'technical.html';
                return;
            }
        });
    </script>
</body>
</html>